(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-132e710e"],{3229:function(e,s,t){"use strict";var r=t("6aab"),a=t.n(r);a.a},"6aab":function(e,s,t){},a55b:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("section",{staticClass:"form_container"},[t("div",{staticClass:"manage_tip"},[t("span",{staticClass:"title"},[e._v("学生信息在线后台管理系统")]),t("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginUser,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{type:"text",placeholder:"请输入email"},model:{value:e.loginUser.email,callback:function(s){e.$set(e.loginUser,"email",s)},expression:"loginUser.email"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginUser.password,callback:function(s){e.$set(e.loginUser,"password",s)},expression:"loginUser.password"}})],1),t("el-form-item",[t("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(s){return e.submitForm("loginForm")}}},[e._v("登录")])],1),t("div",{staticClass:"wrap"},[t("p",[e._v("还没有账号?"),t("router-link",{staticClass:"redirect",attrs:{to:"/register"}},[e._v("现在注册")])],1)])],1)],1)])])},a=[],i=(t("ac6a"),t("456d"),t("7618")),o=t("04e1"),l=t.n(o),n={name:"Login",data:function(){return{loginUser:{email:"",password:""},rules:{email:[{type:"email",required:!0,message:"邮箱不正确",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在6到30之间",trigger:"blur"}]}}},methods:{submitForm:function(e){var s=this;this.$refs[e].validate(function(e){e&&s.$axios.post("/api/users/login",s.loginUser).then(function(e){var t=e.data;if(t.success){s.$message({message:"登录成功",type:"success"});var r=t.token;localStorage.setItem("Token",r);var a=l()(r);localStorage.setItem("icon",a.icon),s.$store.dispatch("setAuthenticated",!s.isEmpty(a)),s.$store.dispatch("setUser",a),s.$router.push("/index")}else s.$message({message:t.msg,type:"error"})},function(e){s.$message({message:"连接错误",type:"error"})})})},isEmpty:function(e){return void 0===e||null===e||"object"===Object(i["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}}},c=n,m=(t("3229"),t("2877")),u=Object(m["a"])(c,r,a,!1,null,"c2f50f18",null);s["default"]=u.exports}}]);
//# sourceMappingURL=chunk-132e710e.89bf9bea.js.map